import{_ as H}from"./AppLayout-CF_FfTgD.js";import{_ as V,a as N}from"./Button-DYYX2dmu.js";import{_ as P}from"./Loader-DN8mK90T.js";import{r as L}from"./ArrowLeftIcon-Bor2sICF.js";import{r as I}from"./PlusIcon-CX8St5oj.js";import{f as m,b as e,o as n,n as j,e as l,r as T,a as f,j as $,h as o,g as y,t as x,m as F,y as w,q as S,F as M,s as z,c as h,A,k as Z,p as E,D as R}from"./index-VqPlM1MX.js";import{r as q,a as G}from"./TrashIcon-C3kfYPwl.js";import{u as U}from"./useTasks-CwPyd9XD.js";import{u as J}from"./useProjects-S8qiQkYI.js";function K(s,a){return n(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}const O={class:"mb-6"},Q={class:"flex justify-between items-center mb-6"},W={key:0,class:"text-gray-600"},X=j({__name:"TaskBoardHeader",props:{projectId:{},project:{}},setup(s){return(a,t)=>{const r=T("router-link");return n(),m("div",null,[e("div",O,[l(r,{to:`/projects/${s.projectId}`,class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:f(()=>[l(o(L),{class:"w-4 h-4 mr-1"}),t[0]||(t[0]=$(" Back to Project ",-1))]),_:1},8,["to"])]),e("div",Q,[e("div",null,[t[1]||(t[1]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Tasks",-1)),s.project?(n(),m("p",W,"Project: "+x(s.project.name),1)):y("",!0)]),l(r,{to:`/projects/${s.projectId}/tasks/create`},{default:f(()=>[l(V,{variant:"primary"},{default:f(()=>[l(o(I),{class:"w-4 h-4 mr-2"}),t[2]||(t[2]=$(" New Task ",-1))]),_:1})]),_:1},8,["to"])])])}}}),Y={class:"flex flex-wrap gap-4 items-center"},tt={class:"flex items-center"},et=["value"],st=j({__name:"TaskFilters",props:{modelValue:{}},emits:["update:modelValue"],setup(s){return(a,t)=>(n(),m("div",Y,[e("label",tt,[t[2]||(t[2]=e("span",{class:"mr-2 text-sm text-gray-700"},"Status:",-1)),e("select",{value:s.modelValue,onChange:t[0]||(t[0]=r=>a.$emit("update:modelValue",r.target.value)),class:"rounded-md border border-gray-300 px-3 py-1 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},[...t[1]||(t[1]=[e("option",{value:"all"},"All",-1),e("option",{value:"todo"},"To Do",-1),e("option",{value:"in_progress"},"In Progress",-1),e("option",{value:"done"},"Done",-1)])],40,et)]),F(a.$slots,"additional-filters")]))}}),ot={class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},at={class:"flex justify-between items-start mb-2"},rt={class:"font-medium text-gray-900"},nt={class:"flex space-x-1"},lt={class:"text-gray-600 text-sm mb-3 line-clamp-2"},it={class:"flex justify-between items-center text-sm"},dt={class:"flex items-center space-x-3"},ut=["value"],ct={key:0,class:"text-gray-500"},mt={class:"text-gray-400 text-xs"},pt=j({__name:"TaskCard",props:{task:{},projectId:{}},emits:["status-change","delete"],setup(s){const a=t=>new Date(t).toLocaleDateString();return(t,r)=>{const i=T("router-link");return n(),m("div",ot,[e("div",at,[e("h3",rt,x(s.task.title),1),e("div",nt,[l(i,{to:`/projects/${s.projectId}/tasks/${s.task.id}/edit`,class:"text-blue-600 hover:text-blue-800 p-1"},{default:f(()=>[l(o(q),{class:"w-4 h-4"})]),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=u=>t.$emit("delete",s.task.id)),class:"text-red-600 hover:text-red-800 p-1"},[l(o(G),{class:"w-4 h-4"})])])]),e("p",lt,x(s.task.description),1),e("div",it,[e("div",dt,[e("select",{value:s.task.status,onChange:r[1]||(r[1]=u=>t.$emit("status-change",s.task.id,u.target.value)),class:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"},[...r[2]||(r[2]=[e("option",{value:"todo"},"To Do",-1),e("option",{value:"in_progress"},"In Progress",-1),e("option",{value:"done"},"Done",-1)])],40,ut),s.task.due_date?(n(),m("span",ct," Due: "+x(a(s.task.due_date)),1)):y("",!0)]),e("span",mt,x(a(s.task.created_at)),1)])])}}}),gt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},ft={class:"space-y-3"},C=j({__name:"TaskColumn",props:{title:{},tasks:{},projectId:{},type:{}},emits:["status-change","delete"],setup(s){const a=s,t={todo:"bg-gray-50",in_progress:"bg-blue-50",done:"bg-green-50"},r={todo:"bg-gray-400",in_progress:"bg-blue-500",done:"bg-green-500"},i=w(()=>t[a.type]),u=w(()=>r[a.type]);return(_,c)=>(n(),m("div",{class:S([i.value,"rounded-lg p-4"])},[e("h3",gt,[e("span",{class:S([u.value,"w-3 h-3 rounded-full mr-2"])},null,2),$(" "+x(s.title)+" ("+x(s.tasks.length)+") ",1)]),e("div",ft,[(n(!0),m(M,null,z(s.tasks,g=>(n(),h(pt,{key:g.id,task:g,"project-id":s.projectId,onStatusChange:c[0]||(c[0]=(k,v)=>_.$emit("status-change",k,v)),onDelete:c[1]||(c[1]=k=>_.$emit("delete",k))},null,8,["task","project-id"]))),128))])],2))}}),kt={class:"text-center py-12"},ht={class:"mt-6"},xt=j({__name:"TaskBoardEmptyState",props:{projectId:{}},setup(s){return(a,t)=>{const r=T("router-link");return n(),m("div",kt,[l(o(K),{class:"mx-auto h-12 w-12 text-gray-400"}),t[1]||(t[1]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No tasks",-1)),t[2]||(t[2]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first task.",-1)),e("div",ht,[l(r,{to:`/projects/${s.projectId}/tasks/create`},{default:f(()=>[l(V,{variant:"primary"},{default:f(()=>[l(o(I),{class:"w-4 h-4 mr-2"}),t[0]||(t[0]=$(" New Task ",-1))]),_:1})]),_:1},8,["to"])])])}}});function _t(){const s=A(),a=Number(s.params.projectId),t=Z("all"),{tasks:r,isLoading:i,fetchTasks:u,updateTaskStatus:_,deleteTask:c}=U(),{fetchProject:g,currentProject:k}=J(),v=w(()=>r.value||[]),b=w(()=>{let p=v.value;return t.value!=="all"&&(p=p.filter(d=>d.status===t.value)),{todo:p.filter(d=>d.status==="todo"),in_progress:p.filter(d=>d.status==="in_progress"),done:p.filter(d=>d.status==="done")}});return{projectId:a,project:k,statusFilter:t,filteredTasks:b,isLoading:i,tasks:v,handleStatusChange:async(p,d)=>{try{await _(p,d),await u(a)}catch(B){console.error("Error updating task status:",B)}},handleDeleteTask:async p=>{if(confirm("Are you sure you want to delete this task?"))try{await c(p)}catch(d){throw d}},initialize:async()=>{await g(a),await u(a)}}}const yt={class:"py-6"},vt={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},jt={key:1,class:"space-y-4"},Nt={__name:"TaskList",setup(s){const{projectId:a,project:t,statusFilter:r,filteredTasks:i,isLoading:u,tasks:_,handleStatusChange:c,handleDeleteTask:g,initialize:k}=_t();return E(k),(v,b)=>(n(),h(H,null,{default:f(()=>[e("div",yt,[e("div",vt,[l(X,{"project-id":o(a),project:o(t)},null,8,["project-id","project"]),l(N,{class:"mb-6"},{default:f(()=>[l(st,{modelValue:o(r),"onUpdate:modelValue":b[0]||(b[0]=D=>R(r)?r.value=D:null)},null,8,["modelValue"])]),_:1}),o(u)?(n(),h(P,{key:0,text:"Loading tasks..."})):(n(),m("div",jt,[o(i).todo.length>0?(n(),h(C,{key:0,title:"To Do",tasks:o(i).todo,"project-id":o(a),type:"todo",onStatusChange:o(c),onDelete:o(g)},null,8,["tasks","project-id","onStatusChange","onDelete"])):y("",!0),o(i).in_progress.length>0?(n(),h(C,{key:1,title:"In Progress",tasks:o(i).in_progress,"project-id":o(a),type:"in_progress",onStatusChange:o(c),onDelete:o(g)},null,8,["tasks","project-id","onStatusChange","onDelete"])):y("",!0),o(i).done.length>0?(n(),h(C,{key:2,title:"Done",tasks:o(i).done,"project-id":o(a),type:"done",onStatusChange:o(c),onDelete:o(g)},null,8,["tasks","project-id","onStatusChange","onDelete"])):y("",!0),!o(u)&&o(_).length===0?(n(),h(xt,{key:3,"project-id":o(a)},null,8,["project-id"])):y("",!0)]))])])]),_:1}))}};export{Nt as default};
