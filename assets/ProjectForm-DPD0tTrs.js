import{n as C,y as S,A as B,k as E,p as N,c as M,a as r,b as t,e as a,j as p,h as o,r as $,d as U,i as f,z as q,B as D,t as v,u as F,o as L}from"./index-VqPlM1MX.js";import{_ as T}from"./AppLayout-CF_FfTgD.js";import{_ as b,a as A}from"./Button-DYYX2dmu.js";import{_ as R}from"./Input-CatUOd1j.js";import{u as z}from"./useProjects-S8qiQkYI.js";import{u as I}from"./useForm-BaGdoIoh.js";import{r as G}from"./ArrowLeftIcon-Bor2sICF.js";const H={class:"py-6"},J={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"mb-6"},O={class:"text-lg font-medium text-gray-900"},Q={class:"flex justify-end space-x-3 pt-4"},re=C({__name:"ProjectForm",setup(W){const c=B(),g=F(),{createProject:x,updateProject:j,fetchProject:y,isLoading:_,currentProject:l}=z(),n=S(()=>!!c.params.id),u=E(!1),P={title:{required:"Project title is required",minLength:3,minLengthMessage:"Project title must be at least 3 characters"}},{form:s,errors:w,validate:h,validateField:k}=I({title:"",description:"",status:"pending"},P),V=async()=>{if(h()){u.value=!0;try{n.value?await j(Number(c.params.id),{title:s.title,description:s.description,status:s.status}):await x({title:s.title,description:s.description,status:s.status}),g.push("/projects")}catch(d){console.error("Error saving project:",d)}finally{u.value=!1}}};return N(async()=>{if(n.value)try{await y(Number(c.params.id)),l.value&&(s.title=l.value.title||"",s.description=l.value.description||"",s.status=l.value.status||"pending")}catch(d){console.error("Error loading project:",d)}}),(d,e)=>{const m=$("router-link");return L(),M(T,null,{default:r(()=>[t("div",H,[t("div",J,[t("div",K,[a(m,{to:"/projects",class:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700"},{default:r(()=>[a(o(G),{class:"w-4 h-4 mr-1"}),e[4]||(e[4]=p(" Back to Projects ",-1))]),_:1})]),a(A,null,{header:r(()=>[t("h2",O,v(n.value?"Edit Project":"Create New Project"),1)]),default:r(()=>[t("form",{onSubmit:U(V,["prevent"]),class:"space-y-6"},[a(R,{label:"Project Title",modelValue:o(s).title,"onUpdate:modelValue":e[0]||(e[0]=i=>o(s).title=i),error:o(w).title,onBlur:e[1]||(e[1]=i=>o(k)("title")),placeholder:"Enter project title",required:""},null,8,["modelValue","error"]),t("div",null,[e[5]||(e[5]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),f(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=i=>o(s).description=i),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter project description"},null,512),[[q,o(s).description]])]),t("div",null,[e[7]||(e[7]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"}," Status ",-1)),f(t("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=i=>o(s).status=i),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[...e[6]||(e[6]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"active"},"Active",-1)])],512),[[D,o(s).status]])]),t("div",Q,[a(m,{to:"/projects"},{default:r(()=>[a(b,{type:"button",variant:"secondary"},{default:r(()=>[...e[8]||(e[8]=[p(" Cancel ",-1)])]),_:1})]),_:1}),a(b,{type:"submit",variant:"primary",disabled:o(_)||u.value},{default:r(()=>[p(v(u.value?"Saving...":n.value?"Update Project":"Create Project"),1)]),_:1},8,["disabled"])])],32)]),_:1})])])]),_:1})}}});export{re as default};
